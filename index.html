<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฏุงุดุจูุฑุฏ ูุฑุบุฏุงุฑ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ุตูุญู ูุฑูุฏ/ุซุจุชโูุงู -->
    <div id="authContainer" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h2>ุจู ุณุงูุงูู ูุฑุบุฏุงุฑ ุฎูุด ุขูุฏุฏ</h2>
                <p>ูุทูุงู ูุงุฑุฏ ุดูุฏ ุง ุซุจุชโูุงู ฺฉูุฏ</p>
            </div>
            <div class="auth-tabs">
                <div class="auth-tab active" onclick="switchAuthTab('login')">ูุฑูุฏ</div>
                <div class="auth-tab" onclick="switchAuthTab('signup')">ุซุจุชโูุงู</div>
            </div>
            <!-- ูุฑู ูุฑูุฏ -->
            <div id="loginForm" class="auth-form active">
                <div class="form-group">
                    <label>ูุงู ฺฉุงุฑุจุฑ / ุดูุงุฑู ุชูุงุณ</label>
                    <input type="text" id="loginUsername" placeholder="ูุงู ฺฉุงุฑุจุฑ ุง ุดูุงุฑู ููุจุงู">
                </div>
                <div class="form-group">
                    <label>ุฑูุฒ ุนุจูุฑ</label>
                    <input type="password" id="loginPassword" placeholder="********">
                </div>
                <button class="auth-btn" onclick="handleLogin()">ูุฑูุฏ</button>
                <div class="auth-link">
                    ุญุณุงุจ ฺฉุงุฑุจุฑ ูุฏุงุฑุฏุ <span onclick="switchAuthTab('signup')">ุซุจุชโูุงู ฺฉูุฏ</span>
                </div>
            </div>
            <!-- ูุฑู ุซุจุชโูุงู -->
            <div id="signupForm" class="auth-form">
                <div class="form-group">
                    <label>ูุงู</label>
                    <input type="text" id="signupFirstName" placeholder="ูุซุงู: ุนู">
                </div>
                <div class="form-group">
                    <label>ูุงู ุฎุงููุงุฏฺฏ</label>
                    <input type="text" id="signupLastName" placeholder="ูุซุงู: ูุญูุฏ">
                </div>
                <div class="form-group">
                    <label>ุดูุงุฑู ุชูุงุณ</label>
                    <input type="tel" id="signupPhone" placeholder="0912XXXXXXX">
                </div>
                <div class="form-group">
                    <label>ุงุณุชุงู</label>
                    <select id="signupProvince">
                        <option value="">ุงูุชุฎุงุจ ุงุณุชุงู</option>
                        <option value="ุขุฐุฑุจุงุฌุงู ุดุฑู">ุขุฐุฑุจุงุฌุงู ุดุฑู</option>
                        <option value="ุขุฐุฑุจุงุฌุงู ุบุฑุจ">ุขุฐุฑุจุงุฌุงู ุบุฑุจ</option>
                        <option value="ุงุฑุฏุจู">ุงุฑุฏุจู</option>
                        <option value="ุงุตููุงู">ุงุตููุงู</option>
                        <option value="ุงูุจุฑุฒ">ุงูุจุฑุฒ</option>
                        <option value="ุงูุงู">ุงูุงู</option>
                        <option value="ุจูุดูุฑ">ุจูุดูุฑ</option>
                        <option value="ุชูุฑุงู">ุชูุฑุงู</option>
                        <option value="ฺูุงุฑูุญุงู ู ุจุฎุชุงุฑ">ฺูุงุฑูุญุงู ู ุจุฎุชุงุฑ</option>
                        <option value="ุฎุฑุงุณุงู ุฌููุจ">ุฎุฑุงุณุงู ุฌููุจ</option>
                        <option value="ุฎุฑุงุณุงู ุฑุถู">ุฎุฑุงุณุงู ุฑุถู</option>
                        <option value="ุฎุฑุงุณุงู ุดูุงู">ุฎุฑุงุณุงู ุดูุงู</option>
                        <option value="ุฎูุฒุณุชุงู">ุฎูุฒุณุชุงู</option>
                        <option value="ุฒูุฌุงู">ุฒูุฌุงู</option>
                        <option value="ุณููุงู">ุณููุงู</option>
                        <option value="ุณุณุชุงู ู ุจููฺุณุชุงู">ุณุณุชุงู ู ุจููฺุณุชุงู</option>
                        <option value="ูุงุฑุณ">ูุงุฑุณ</option>
                        <option value="ูุฒูู">ูุฒูู</option>
                        <option value="ูู">ูู</option>
                        <option value="ฺฉุฑุฏุณุชุงู">ฺฉุฑุฏุณุชุงู</option>
                        <option value="ฺฉุฑูุงู">ฺฉุฑูุงู</option>
                        <option value="ฺฉุฑูุงูุดุงู">ฺฉุฑูุงูุดุงู</option>
                        <option value="ฺฉูฺฏููู ู ุจูุฑุงุญูุฏ">ฺฉูฺฏููู ู ุจูุฑุงุญูุฏ</option>
                        <option value="ฺฏูุณุชุงู">ฺฏูุณุชุงู</option>
                        <option value="ฺฏูุงู">ฺฏูุงู</option>
                        <option value="ูุฑุณุชุงู">ูุฑุณุชุงู</option>
                        <option value="ูุงุฒูุฏุฑุงู">ูุงุฒูุฏุฑุงู</option>
                        <option value="ูุฑฺฉุฒ">ูุฑฺฉุฒ</option>
                        <option value="ูุฑูุฒฺฏุงู">ูุฑูุฒฺฏุงู</option>
                        <option value="ููุฏุงู">ููุฏุงู</option>
                        <option value="ุฒุฏ">ุฒุฏ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ุดูุฑ</label>
                    <input type="text" id="signupCity" placeholder="ูุซุงู: ุชูุฑุงู">
                </div>
                <button class="auth-btn" onclick="handleSignup()">ุซุจุชโูุงู</button>
                <div class="auth-link">
                    ูุจูุงู ุซุจุชโูุงู ฺฉุฑุฏูโุงุฏุ <span onclick="switchAuthTab('login')">ูุงุฑุฏ ุดูุฏ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ุฏุงุดุจูุฑุฏ ุงุตู -->
    <div id="dashboardContainer" class="container hidden">
        <div class="header">
            <div class="logo"><h1>ูุฑุบุฏุงุฑ</h1></div>
            <div class="nav-menu">
                <!-- ููู ฺฏุฒุงุฑุดโูุง -->
                <div class="dropdown">
                    <button class="dropbtn">๐ ฺฏุฒุงุฑุดโูุง</button>
                    <div class="dropdown-content">
                        <span onclick="openDailyReportModal()">ฺฏุฒุงุฑุด ุฑูุฒุงูู</span>
                        <span onclick="alert('ุซุจุช ุฎุฑุฏูุง ุฏูุฑู ุจู ุฒูุฏ')">ุซุจุช ุฎุฑุฏูุง ุฏูุฑู</span>
                        <span onclick="alert('ฺฏุฒุงุฑุดุงุช ูุฑูุด ูุฑุบ ุจู ุฒูุฏ')">ฺฏุฒุงุฑุดุงุช ูุฑูุด ูุฑุบ</span>
                    </div>
                </div>
                <!-- ููู ูุญุงุณุจุงุช -->
                <div class="dropdown">
                    <button class="dropbtn">๐งฎ ูุญุงุณุจุงุช ู ูููุฏุงุฑูุง</button>
                    <div class="dropdown-content">
                        <span onclick="openWaterVaccine()">ูุญุงุณุจู ุขุจ ูุงฺฉุณู</span>
                        <span onclick="openWaterCalc()">ูุญุงุณุจู ูุตุฑู ุขุจ</span>
                        <span onclick="openConsumptionCalc()">ูุญุงุณุจู ูุตุฑู ุดุฏู</span>
                        <span onclick="openMortalityChart()">ูููุฏุงุฑ ุชููุงุช</span>
                        <span onclick="openMoreCalculations()">ูุญุงุณุจุงุช ุชฺฉูู</span>
                    </div>
                </div>
                <!-- ุณุงุฑ ุขุชูโูุง -->
                <span class="nav-item" onclick="openFanCalculator()">๐ ุชูุธู ุฏูุฑ ูู</span>
                <span class="nav-item" onclick="openSettings()">๐ฃ ูุฑูุฏ ุฌูุฌู</span>
                <span class="nav-item" onclick="openReportsModal()">๐ ฺฏุฒุงุฑุดุงุช</span>
                <span class="nav-item" onclick="exportData()">๐ฅ ุฎุฑูุฌ ุงุทูุงุนุงุช</span>
                <span class="nav-item" onclick="document.getElementById('importFile').click()">๐ค ูุฑูุฏ ุงุทูุงุนุงุช</span>
                <span class="nav-item" onclick="logout()">๐ช ุฎุฑูุฌ</span>
                <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
            </div>
            <div class="profile">
                <span id="profileName">ูุฏุฑ ูุฑุบุฏุงุฑ</span>
                <div class="avatar">ู</div>
            </div>
        </div>

        <!-- ุฑุฏู ฑ: ููุฌูุฏ ุณุงููโูุง -->
        <div class="row" id="hallsRow"></div>

        <!-- ุฑุฏู ฒ: ูุตุฑู ุฏุงู ู ุถุฑุจ ุชุจุฏู -->
        <div class="row-2">
            <div class="metric-card">
                <div class="metric-info"><h3>๐พ ูุตุฑู ุฏุงู</h3><div class="value" id="totalFeed">ฐ</div><div>ฺฉููฺฏุฑู</div></div>
                <div class="metric-icon">๐</div>
            </div>
            <div class="metric-card">
                <div class="metric-info"><h3>๐ ุถุฑุจ ุชุจุฏู</h3><div class="value" id="conversionRate">ฐ</div><div>kg/kg</div></div>
                <div class="metric-icon">๐</div>
            </div>
        </div>

        <!-- ุฑุฏู ต: ูููุฏุงุฑูุง -->
        <div class="row-5">
            <div class="chart-card"><div class="chart-header"><h3>๐ ูููุฏุงุฑ ูุงูฺฏู ูุฒู</h3><span>ท ุฑูุฒ ุงุฎุฑ</span></div><div class="chart-placeholder">[ูููุฏุงุฑ ูุงูฺฏู ูุฒู]</div></div>
            <div class="chart-card"><div class="chart-header"><h3>๐ ูููุฏุงุฑ ุชููุงุช</h3><span>ท ุฑูุฒ ุงุฎุฑ</span></div><div class="chart-placeholder">[ูููุฏุงุฑ ุชููุงุช]</div></div>
        </div>
    </div>

    <!-- ููุฏุงู ูุฑูุฏ ุฌูุฌู -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header"><h2>๐ฃ ูุฑูุฏ ุฌูุฌู</h2><button class="close-btn" onclick="closeSettingsModal()">ร</button></div>
            <div id="hallsEditContainer"></div>
            <button class="add-hall-btn" onclick="addNewHall()"><span>+</span> ุงูุฒูุฏู ุณุงูู ุฌุฏุฏ</button>
            <div class="modal-actions">
                <button class="modal-btn primary" onclick="saveHallChanges()">ุฐุฎุฑู ุชุบุฑุงุช</button>
                <button class="modal-btn secondary" onclick="closeSettingsModal()">ุงูุตุฑุงู</button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุชูุธู ุฏูุฑ ูู -->
    <div class="modal" id="fanModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ ูุงุดู ุญุณุงุจ ุฏูุฑ ูู</h2>
                <button class="close-btn" onclick="closeFanModal()">ร</button>
            </div>
            <div class="calc-container">
                <div class="calc-title">โ๏ธ ูพุงุฑุงูุชุฑูุง ูุฑูุฏ</div>
                <div class="calc-grid">
                    <label>ุณู ุฌูุฌู (ุฑูุฒ):</label>
                    <input type="number" id="calcAge" value="20" min="0">
                </div>
                <div class="calc-grid">
                    <label>ุฏูุง ุฏุงุฎู ุณุงูู (ยฐC):</label>
                    <input type="number" id="calcTemp" value="28" min="0" max="50">
                </div>
                <div class="calc-grid">
                    <label>ุฑุทูุจุช ูุณุจ (%):</label>
                    <input type="number" id="calcHumidity" value="60" min="0" max="100">
                </div>
                <div class="calc-grid">
                    <label>ูุฒู ูุชูุณุท ุฌูุฌู (ฺฏุฑู):</label>
                    <input type="number" id="calcWeight" value="800" min="0">
                </div>
                <div class="calc-grid">
                    <label>ููุน ูู:</label>
                    <select id="calcFanType">
                        <option value="axial">ูุญูุฑ (Axial)</option>
                        <option value="centrifugal">ุณุงูุชุฑููฺ (Centrifugal)</option>
                    </select>
                </div>
                <div class="calc-grid">
                    <label>ุญุฏุงฺฉุซุฑ ุฏูุฑ ูู (RPM):</label>
                    <input type="number" id="calcMaxRPM" value="3000" min="100" max="10000">
                </div>
                <div class="calc-grid">
                    <label>ูุฑฺฉุงูุณ ุดุจฺฉู (Hz):</label>
                    <input type="number" id="calcFreq" value="50" min="50" max="60">
                </div>
                <button class="calc-btn" onclick="calculateFanSpeed()">ูุญุงุณุจู ุฏูุฑ ูพุดููุงุฏ</button>
                <div class="calc-result" id="calcResult">
                    <div class="label">ุฏูุฑ ูพุดููุงุฏ:</div>
                    <div class="value" id="suggestedRPM">ฑดฐฐ</div>
                    <div class="unit">RPM</div>
                    <div class="hz-value" id="suggestedFrequency">(ูุนุงุฏู ฒณ.ณ Hz ุฏุฑ ุงููุฑุชุฑ)</div>
                </div>
                <div class="calc-note">
                    <strong>ูุฑููู ูุญุงุณุจู:</strong> ุฏูุฑ ูพุงู ฑฐฐฐ + (ุณู ร ฑฐ) + (ูุฑ ุฏุฑุฌู ุจุงูุง ฒตุ +ฒฐ) + (ูุฑ ฑฐูช ุฑุทูุจุช ุจุงูุง ทฐุ +ตฐ) + (ูุฑ ฑฐฐ ฺฏุฑู ุจุงูุง ฑฐฐฐ ฺฏุฑูุ +ณฐ) ร ุถุฑุจ ููุน ูู (ูุญูุฑ ฑ, ุณุงูุชุฑููฺ ฑ.ฒ). ุณูพุณ ูุญุฏูุฏ ุจู ุญุฏุงฺฉุซุฑ ุฏูุฑ.
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ููุงุด ฺฏุฒุงุฑุดุงุช ุซุจุช ุดุฏู -->
    <div class="modal" id="reportsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ ฺฏุฒุงุฑุดุงุช ุซุจุชโุดุฏู</h2>
                <button class="close-btn" onclick="closeReportsModal()">ร</button>
            </div>
            <div class="form-group">
                <label>ุงูุชุฎุงุจ ุณุงูู:</label>
                <select id="modalReportHallSelect" onchange="loadReportsIntoModal(this.value)">
                    <!-- ุชูุณุท js ูพุฑ ูโุดูุฏ -->
                </select>
            </div>
            <div class="reports-modal-summary" id="modalSummary">
                <!-- ุฎูุงุตู ุขูุงุฑ -->
            </div>
            <div class="reports-list" id="modalReportsList" style="max-height: 300px;">
                <!-- ูุณุช ฺฏุฒุงุฑุดุงุช -->
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ฺฏุฒุงุฑุด ุฑูุฒุงูู -->
    <div class="modal" id="dailyReportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ ฺฏุฒุงุฑุด ุฑูุฒุงูู</h2>
                <button class="close-btn" onclick="closeDailyReportModal()">ร</button>
            </div>
            <div class="daily-report-form">
                <div class="info-message">๐ ูุทูุงู ุงุทูุงุนุงุช ุงูุฑูุฒ ุฑุง ูุงุฑุฏ ฺฉูุฏ. ุณู ุจุฑ ุงุณุงุณ ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุง ุซุจุชโุดุฏู ูุญุงุณุจู ูโุดูุฏ.</div>
                
                <div class="form-group">
                    <label>ุงูุชุฎุงุจ ุณุงูู:</label>
                    <select id="modalDailyHallSelect" onchange="updateModalAgeDisplay(); renderModalReportsList();">
                        <!-- ุชูุณุท js ูพุฑ ูโุดูุฏ -->
                    </select>
                </div>

                <div class="form-group">
                    <label>ุณู ุฌูุฌู (ุฑูุฒ):</label>
                    <div class="calculated-age" id="modalCalculatedAgeDisplay">0</div>
                </div>

                <div class="form-group">
                    <label>ุชุนุฏุงุฏ ุชููุงุช ุงูุฑูุฒ:</label>
                    <input type="number" id="modalMortalityInput" min="0" value="0">
                </div>

                <div class="form-group">
                    <label>ูุตุฑู ุฏุงู ุงูุฑูุฒ (ฺฉููฺฏุฑู):</label>
                    <input type="number" id="modalFeedInput" min="0" value="0">
                </div>

                <div class="form-group" id="modalWeightGroup" style="display: none;">
                    <label>ูุงูฺฏู ูุฒู ุงูุฑูุฒ (ฺฏุฑู):</label>
                    <input type="number" id="modalWeightInput" min="0">
                </div>

                <button class="submit-btn" onclick="submitModalDailyReport()">ุซุจุช ฺฏุฒุงุฑุด ุฑูุฒุงูู</button>
            </div>
            <div id="modalReportsListContainer"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
